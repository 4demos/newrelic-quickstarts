{
  "name": "ArgoCD (Prometheus)",
  "description": "A dashboard for ArgoCD based on metrics sent to New Relic using Prometheus Agent or Prometheus server.",
  "pages": [
    {
      "name": "Overview",
      "description": null,
      "widgets": [
        {
          "title": "",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 3,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "![ArgoCD Logo](https://avatars1.githubusercontent.com/u/30269780?s=110&v=4)\n\n### Overview\n[Argo CD](https://argo-cd.readthedocs.io/en/stable/) is a declarative, GitOps continuous delivery tool for Kubernetes. Unlike external CD tools that only enable push-based deployments, Argo CD can pull updated code from Git repositories and deploy it directly to Kubernetes resources. It enables developers to manage both infrastructure configuration and application updates in one system.\n- - -\n### About this Dashboard\n\n- For information on the prerequisites for this dashboard, please visit the documentation [here](https://docs.newrelic.com/docs/infrastructure/prometheus-integrations/integrations-list/core-dns-integration).\n- For more information on how to send Prometheus metrics to New Relic using Prometheus Agent or Prometheus Server, visit the documentation [here](https://docs.newrelic.com/docs/infrastructure/prometheus-integrations/get-started/send-prometheus-metric-data-new-relic/)\n\n\n"
          }
        },
        {
          "title": "",
          "layout": {
            "column": 4,
            "row": 1,
            "width": 1,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT cardinality(`__result_0`) as 'Clusters' FROM (SELECT cardinality(argocd_cluster_info) AS `__result_0` FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and ((namespace RLIKE '.*') OR namespace IS NULL) FACET server LIMIT max) SINCE 1 MINUTES AGO UNTIL NOW"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": true
            }
          }
        },
        {
          "title": "",
          "layout": {
            "column": 5,
            "row": 1,
            "width": 1,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT count('projects') as 'Projects' FROM (SELECT latest(argocd_app_info) AS 'projects' FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and dest_server in ({{ cluster }}) FACET project, clusterName LIMIT MAX) since 1 minute ago until now"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": true
            }
          }
        },
        {
          "title": "Health Status",
          "layout": {
            "column": 6,
            "row": 1,
            "width": 3,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "from (SELECT (latest(argocd_app_info)) FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and NOT ((health_status = '')) and health_status in ({{ health_status }}) FACET name, health_status LIMIT max)\nselect latest(health_status) facet name SINCE 1 minute ago until now limit max"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": true
            }
          }
        },
        {
          "title": "Sync Status",
          "layout": {
            "column": 9,
            "row": 1,
            "width": 4,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "from (SELECT (latest(argocd_app_info) as 'status') FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and NOT ((health_status = '')) and sync_status in ({{ sync_status }}) FACET name, sync_status LIMIT max)\nselect latest(sync_status) facet name since 1 minute ago until now limit max"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": true
            }
          }
        },
        {
          "title": "",
          "layout": {
            "column": 4,
            "row": 3,
            "width": 1,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT count('apps') as 'Applications' FROM (SELECT latest(argocd_app_info) AS 'apps' FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and namespace in ({{ namespace }}) and dest_server in ({{ cluster }}) and health_status in ({{ health_status }}) and sync_status in ({{ sync_status }}) FACET name, clusterName LIMIT MAX) since 1 minute ago until now"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": true
            }
          }
        },
        {
          "title": "",
          "layout": {
            "column": 5,
            "row": 3,
            "width": 1,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT count('repos') as 'Repositories' FROM (SELECT latest(argocd_app_info) AS 'repos' FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and namespace in ({{ namespace }}) FACET repo, prometheus_server LIMIT MAX) since 1 minute ago until now"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": true
            }
          }
        },
        {
          "title": "",
          "layout": {
            "column": 1,
            "row": 5,
            "width": 1,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "### Application Status"
          }
        },
        {
          "title": "Application Count by Project",
          "layout": {
            "column": 2,
            "row": 5,
            "width": 3,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "from (SELECT latest(argocd_app_info) AS 'apps' FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) facet name, project timeseries limit max) select sum(apps) timeseries facet project"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "units": {
              "unit": "COUNT"
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Health Status",
          "layout": {
            "column": 5,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "from (SELECT latest(argocd_app_info) as 'apps' FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and NOT ((health_status = '')) and health_status in ({{ health_status }}) and sync_status in ({{ sync_status }}) and namespace in ({{ namespace }}) FACET name, health_status LIMIT max TIMESERIES 1 minute) select sum(apps) facet health_status timeseries 1 minute"
              }
            ],
            "nullValues": {
              "nullValue": "zero"
            },
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Sync Status",
          "layout": {
            "column": 9,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "from (SELECT latest(argocd_app_info) as 'apps' FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and NOT ((sync_status = '')) and sync_status in ({{ sync_status }}) FACET name, sync_status LIMIT max TIMESERIES 1 minute) select sum(apps) facet sync_status timeseries 1 minute"
              }
            ],
            "nullValues": {
              "nullValue": "zero"
            },
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "",
          "layout": {
            "column": 1,
            "row": 8,
            "width": 1,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "### Sync Status"
          }
        },
        {
          "title": "Sync Activity",
          "layout": {
            "column": 2,
            "row": 8,
            "width": 5,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT (average(round(`__result_1`)) * cardinality(round(`__result_1`))) FROM (SELECT sum(argocd_app_sync_total) AS `__result_0`, sum(argocd_app_sync_total) AS `__result_1` FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and namespace in ({{ namespace }}) FACET {{ grouping }} LIMIT max TIMESERIES 5 minutes SLIDE BY 1 minute) SINCE 60 MINUTES AGO UNTIL NOW FACET {{ grouping }} TIMESERIES 1 minute limit max"
              }
            ],
            "nullValues": {
              "nullValue": "default"
            },
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "Sync Failures",
          "layout": {
            "column": 7,
            "row": 8,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT (average(round(`__result_1`)) * cardinality(round(`__result_1`))) FROM (SELECT sum(argocd_app_sync_total) AS `__result_0`, sum(argocd_app_sync_total) AS `__result_1` FROM Metric where instrumentation.name = 'remote-write' and prometheus_server in ({{ prometheus_server }}) and (phase RLIKE 'Error|Failed') FACET dimensions() LIMIT MAX TIMESERIES 5 minutes SLIDE BY 1 minute) SINCE 60 MINUTES AGO UNTIL NOW FACET tuple(phase, {{ grouping }}) LIMIT MAX TIMESERIES 5 minutes SLIDE BY 1 minute"
              }
            ],
            "nullValues": {
              "nullValue": "zero"
            },
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        }
      ]
    },
    {
      "name": "Controller Stats",
      "description": null,
      "widgets": [
        {
          "title": "Reconciliation Activity",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT sum(argocd_app_reconcile_count) FROM Metric where instrumentation.name = 'remote-write' and dest_server in ({{ cluster }}) SINCE 60 MINUTES AGO UNTIL NOW FACET dest_server LIMIT MAX TIMESERIES 300000 SLIDE BY 60000"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": false
            }
          }
        },
        {
          "title": "Reconciliation Performance Percentiles",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 12,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT bucketpercentile(argocd_app_reconcile_bucket, (100 * 0.95)) FROM Metric where instrumentation.name = 'remote-write' and dest_server in ({{ cluster }}) SINCE 60 MINUTES AGO UNTIL NOW FACET concat(dest_server,': 95%') LIMIT 100 TIMESERIES 300000 SLIDE BY 60000"
              },
              {
                "accountId": 0,
                "query": "SELECT bucketpercentile(argocd_app_reconcile_bucket, (100 * 0.50)) FROM Metric where instrumentation.name = 'remote-write' and dest_server in ({{ cluster }}) SINCE 60 MINUTES AGO UNTIL NOW FACET concat(dest_server, ': 50%') LIMIT 100 TIMESERIES 300000 SLIDE BY 60000"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "K8s API Activity (requests by verb, resource)",
          "layout": {
            "column": 1,
            "row": 7,
            "width": 12,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT sum(argocd_app_k8s_request_total) FROM Metric where instrumentation.name = 'remote-write' and server in ({{ cluster }}) SINCE 60 MINUTES AGO UNTIL NOW FACET tuple(verb, resource_kind) LIMIT 100 TIMESERIES 5 minutes SLIDE BY 1 minute"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Workqueue Depth",
          "layout": {
            "column": 1,
            "row": 10,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT (average(workqueue_depth) * cardinality(workqueue_depth)) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-metrics' SINCE 60 MINUTES AGO UNTIL NOW FACET name LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Pending kubectl run",
          "layout": {
            "column": 7,
            "row": 10,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT (average(argocd_kubectl_exec_pending) * cardinality(argocd_kubectl_exec_pending)) FROM Metric where instrumentation.name = 'remote-write' FACET command LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Memory Usage",
          "layout": {
            "column": 1,
            "row": 13,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(go_memstats_heap_alloc_bytes) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-metrics' SINCE 60 MINUTES AGO UNTIL NOW FACET app_kubernetes_io_name LIMIT 100 TIMESERIES 1 minute"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "CPU Usage",
          "layout": {
            "column": 5,
            "row": 13,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT irate(process_cpu_seconds_total, 1 SECONDS) FROM Metric where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-metrics' facet app_kubernetes_io_name LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Goroutines",
          "layout": {
            "column": 9,
            "row": 13,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(go_goroutines) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-metrics' SINCE 60 MINUTES AGO UNTIL NOW FACET app_kubernetes_io_name LIMIT 100 TIMESERIES 30000"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        }
      ]
    },
    {
      "name": "Repo Server Stats",
      "description": null,
      "widgets": [
        {
          "title": "Git Requests (ls-remote)",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT sum(argocd_git_request_total)FROM Metric WHERE instrumentation.name = 'remote-write' and (request_type = 'ls-remote') FACET request_type, repo LIMIT 100 TIMESERIES"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Git LS-Remote Performance (95%)",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT bucketpercentile(argocd_git_request_duration_seconds_bucket, (100 * 0.95)) FROM Metric WHERE instrumentation.name = 'remote-write' and (request_type = 'ls-remote') SINCE 60 MINUTES AGO UNTIL NOW FACET request_type, repo LIMIT 100 TIMESERIES"
              }
            ],
            "nullValues": {
              "nullValue": "zero"
            },
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Git Requests (checkout)",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT sum(argocd_git_request_total) FROM Metric WHERE instrumentation.name = 'remote-write' and (request_type = 'fetch') FACET request_type, repo LIMIT 100 TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Git Fetch Performance",
          "layout": {
            "column": 7,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT bucketpercentile(argocd_git_request_duration_seconds_bucket, (100 * 0.95)) FROM Metric WHERE instrumentation.name = 'remote-write' and (request_type = 'fetch') SINCE 60 MINUTES AGO UNTIL NOW FACET request_type, repo LIMIT 100 TIMESERIES 1 minute"
              }
            ],
            "nullValues": {
              "nullValue": "zero"
            },
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Memory Used",
          "layout": {
            "column": 1,
            "row": 7,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(go_memstats_heap_alloc_bytes) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-repo-server' SINCE 60 MINUTES AGO UNTIL NOW FACET app_kubernetes_io_name LIMIT 100 TIMESERIES 1 minute"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "units": {
              "unit": "BYTES"
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Goroutines",
          "layout": {
            "column": 7,
            "row": 7,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(go_goroutines) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-repo-server' facet app_kubernetes_io_name LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        }
      ]
    },
    {
      "name": "Server Stats",
      "description": null,
      "widgets": [
        {
          "title": "Memory Used",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(go_memstats_heap_alloc_bytes) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' LIMIT MAX TIMESERIES facet app_kubernetes_io_name"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Goroutines",
          "layout": {
            "column": 5,
            "row": 1,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(go_goroutines) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' LIMIT MAX TIMESERIES facet app_kubernetes_io_name "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "GC Time Quantiles",
          "layout": {
            "column": 9,
            "row": 1,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(go_gc_duration_seconds) FROM Metric WHERE instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' and quantile in ('0.5','0.75') limit max TIMESERIES facet concat(app_kubernetes_io_name, ' - ', if(quantile = '0.5', '50%ile', '75%ile'))"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 12,
            "height": 1
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "#### gRPC Services:"
          }
        },
        {
          "title": "ApplicationService Requests / min",
          "layout": {
            "column": 1,
            "row": 5,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='application.ApplicationService' TIMESERIES FACET grpc_code LIMIT MAX  "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "ClusterService Requests / min",
          "layout": {
            "column": 7,
            "row": 5,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='cluster.ClusterService' FACET grpc_code  LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "ProjectService Requests / min",
          "layout": {
            "column": 1,
            "row": 8,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='project.ProjectService' FACET grpc_code LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "RepositoryService Requests",
          "layout": {
            "column": 7,
            "row": 8,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='repository.RepositoryService' FACET grpc_code LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "SessionService Requests",
          "layout": {
            "column": 1,
            "row": 11,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='session.SessionService' FACET grpc_code LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "VersionService Requests",
          "layout": {
            "column": 7,
            "row": 11,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='version.VersionService' FACET grpc_code LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "AccountService Requests",
          "layout": {
            "column": 1,
            "row": 14,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='account.AccountService' FACET grpc_code LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "SettingsService Requests",
          "layout": {
            "column": 7,
            "row": 14,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.stacked-bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric select rate(sum(grpc_server_handled_total), 1 minute) where instrumentation.name = 'remote-write' and app_kubernetes_io_name = 'argocd-server-metrics' AND grpc_service ='cluster.SettingsService' FACET grpc_code LIMIT MAX TIMESERIES "
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        }
      ]
    }
  ],
  "variables": [
    {
      "name": "prometheus_server",
      "items": null,
      "defaultValues": [
        {
          "value": {
            "string": "*"
          }
        }
      ],
      "nrqlQuery": {
        "accountIds": [
          0
        ],
        "query": "from Metric select uniques(prometheus_server) where instrumentation.name = 'remote-write' and metricName like 'argo%'"
      },
      "title": "Prometheus Server",
      "type": "NRQL",
      "isMultiSelection": true,
      "replacementStrategy": "STRING"
    },
    {
      "name": "cluster",
      "items": null,
      "defaultValues": [],
      "nrqlQuery": {
        "accountIds": [
          0
        ],
        "query": "from Metric select uniques(server) where metricName = 'argocd_cluster_info' and instrumentation.name = 'remote-write'"
      },
      "title": "Cluster",
      "type": "NRQL",
      "isMultiSelection": true,
      "replacementStrategy": "STRING"
    },
    {
      "name": "namespace",
      "items": null,
      "defaultValues": [
        {
          "value": {
            "string": "*"
          }
        }
      ],
      "nrqlQuery": {
        "accountIds": [
          0
        ],
        "query": "from Metric select uniques(namespace) where instrumentation.name = 'remote-write' and metricName like 'argo%' since 1 day ago"
      },
      "title": "Namespace",
      "type": "NRQL",
      "isMultiSelection": true,
      "replacementStrategy": "STRING"
    },
    {
      "name": "health_status",
      "items": null,
      "defaultValues": [
        {
          "value": {
            "string": "*"
          }
        }
      ],
      "nrqlQuery": {
        "accountIds": [
          0
        ],
        "query": "from Metric select uniques(health_status) where instrumentation.name = 'remote-write' and metricName = 'argocd_app_info' since 1 day ago"
      },
      "title": "Health Status",
      "type": "NRQL",
      "isMultiSelection": true,
      "replacementStrategy": "STRING"
    },
    {
      "name": "sync_status",
      "items": null,
      "defaultValues": [
        {
          "value": {
            "string": "*"
          }
        }
      ],
      "nrqlQuery": {
        "accountIds": [
          0
        ],
        "query": "from Metric select uniques(sync_status) where instrumentation.name = 'remote-write' and metricName = 'argocd_app_info' since 1 day ago"
      },
      "title": "Sync Status",
      "type": "NRQL",
      "isMultiSelection": true,
      "replacementStrategy": "STRING"
    },
    {
      "name": "grouping",
      "items": [
        {
          "title": null,
          "value": "namespace"
        },
        {
          "title": null,
          "value": "name"
        },
        {
          "title": null,
          "value": "project"
        }
      ],
      "defaultValues": [
        {
          "value": {
            "string": "name"
          }
        }
      ],
      "nrqlQuery": null,
      "title": "Grouping",
      "type": "ENUM",
      "isMultiSelection": false,
      "replacementStrategy": "IDENTIFIER"
    }
  ]
}