name: Uplink Interface Down Violation

description: |+
  This alert will trigger when a Kentik ktranslate container has an excessive input queue length.  This is an indication that the container does not have enough resources to keep up with the incoming data.  You may need to scale horizontally or vertically to address these needs.

type: STATIC

nrql:
  query: "FROM Metric SELECT filter(count(*), where if_OperStatus = 'down' and if_Alias like '%uplink%') FACET device_name, if_interface_name, if_Alias WHERE metricName = 'kentik.snmp.if_OperStatus' AND entity.type in ('ROUTER','SWITCH')"

valueFunction: SINGLE_VALUE 

terms:
  - priority: CRITICAL
    operator: ABOVE
    threshold: 0
    thresholdDuration: 300
    thresholdOccurrences: ALL

violationTimeLimitSeconds: 86400

signal:
  aggregationWindow: 300
